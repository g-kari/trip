/* ========================================
   Expense Splitting Styles
   ======================================== */

/* Expense Section Wrapper */
.expense-section-wrapper {
  @apply mt-[var(--space-5)] pt-[var(--space-5)] border-t border-border-light;
}

.expense-button-row {
  @apply flex gap-[var(--space-2)] mb-[var(--space-3)];
}

.expense-modal-btn {
  @apply flex items-center gap-[var(--space-2)] flex-1 justify-center;
}

.expense-toggle-btn {
  @apply flex-1 text-center;
}

.expense-management {
  @apply mt-[var(--space-4)] flex flex-col gap-[var(--space-5)];
}

/* Trip Member Manager */
.trip-member-manager {
  @apply bg-bg-elevated border border-border rounded-m p-[var(--space-4)];
}

.member-manager-title {
  @apply text-base font-medium text-text mb-[var(--space-3)];
}

.member-empty-message {
  @apply text-text-muted text-sm text-center py-[var(--space-3)] px-0;
}

.member-list {
  @apply list-none p-0 m-0 mb-[var(--space-3)];
}

.member-list-item {
  @apply flex items-center justify-between py-[var(--space-2)] px-0 border-b border-border-light;

  &:last-child {
    @apply border-b-0;
  }
}

.member-name {
  @apply text-sm text-text;
}

.member-delete-btn {
  @apply text-text-muted text-sm;
}

.member-add-form {
  @apply flex flex-col gap-[var(--space-2)] mt-[var(--space-3)];
}

.member-add-actions {
  @apply flex gap-[var(--space-2)];
}

.member-add-btn {
  @apply w-full mt-[var(--space-2)];
}

/* Expense Splitter */
.expense-splitter {
  @apply bg-bg-elevated border border-border rounded-m p-[var(--space-4)];

  &.loading,
  &.empty {
    @apply text-center text-text-muted;
  }
}

.expense-empty-message {
  @apply text-sm mb-[var(--space-3)];
}

.expense-section {
  @apply mb-[var(--space-4)];

  &:last-child {
    @apply mb-0;
  }
}

.expense-section-title {
  @apply text-sm font-medium text-text mb-[var(--space-2)];
}

.expense-payment-row {
  @apply flex items-center gap-[var(--space-2)] mb-[var(--space-2)];
}

.expense-select {
  @apply flex-1 min-w-[100px];
}

.expense-amount-input {
  @apply flex items-center gap-1;
}

.expense-currency {
  @apply text-text-muted text-sm;
}

.expense-input {
  @apply w-[100px];
}

.expense-remove-btn {
  @apply py-0 px-[var(--space-2)] text-text-muted;
}

.expense-add-btn {
  font-size: var(--font-size-caption);
}

.expense-split-mode {
  @apply flex gap-[var(--space-3)] mb-[var(--space-3)];
}

.expense-radio-label {
  @apply flex items-center gap-[var(--space-1)] text-sm text-text cursor-pointer;

  & input[type="radio"] {
    @apply w-4 h-4;
  }
}

.expense-split-members {
  @apply flex flex-col gap-[var(--space-2)];
}

.expense-split-row {
  @apply flex items-center justify-between p-[var(--space-2)] bg-bg rounded-s;

  &.excluded {
    @apply opacity-50;
  }
}

.expense-member-checkbox {
  @apply flex items-center gap-[var(--space-2)] cursor-pointer;

  & input[type="checkbox"] {
    @apply w-4 h-4;
  }
}

.expense-member-name {
  @apply text-sm text-text;
}

.expense-split-custom {
  @apply flex items-center gap-[var(--space-2)];
}

.expense-select-small {
  @apply py-[var(--space-1)] px-[var(--space-2)];
  font-size: var(--font-size-caption);
}

.expense-input-small {
  @apply w-[60px] py-[var(--space-1)] px-[var(--space-2)];
  font-size: var(--font-size-caption);
}

.expense-custom-input {
  @apply flex items-center gap-1 text-sm text-text-muted;
}

.expense-preview {
  @apply bg-bg rounded-s p-[var(--space-3)];
}

.expense-preview-list {
  @apply flex flex-col gap-[var(--space-2)];
}

.expense-preview-row {
  @apply flex justify-between text-sm;
}

.expense-preview-name {
  @apply text-text;
}

.expense-preview-amount {
  @apply text-text font-medium;
}

.expense-preview-total {
  @apply flex justify-between pt-[var(--space-2)] mt-[var(--space-2)] border-t border-border-light text-sm font-medium;
}

.expense-actions {
  @apply mt-[var(--space-3)] text-right;
}

.add-member-form {
  @apply mt-[var(--space-3)] flex flex-col gap-[var(--space-2)];
}

.add-member-actions {
  @apply flex gap-[var(--space-2)];
}

/* Settlement Summary */
.settlement-summary {
  @apply bg-bg-elevated border border-border rounded-m p-[var(--space-4)];

  &.loading,
  &.error,
  &.empty {
    @apply text-center text-text-muted p-[var(--space-5)];
  }
}

.settlement-loading,
.settlement-error {
  @apply text-sm;
}

.settlement-empty {
  @apply p-[var(--space-3)];
}

.settlement-empty-title {
  @apply text-sm font-medium text-text mb-[var(--space-1)];
}

.settlement-empty-description {
  @apply text-text-muted;
  font-size: var(--font-size-caption);
}

.settlement-header {
  @apply flex justify-between items-center mb-[var(--space-4)];
}

.settlement-title {
  @apply text-base font-medium text-text;
}

.settlement-total {
  @apply text-right;
}

.settlement-total-label {
  @apply block text-text-muted;
  font-size: var(--font-size-caption);
}

.settlement-total-amount {
  @apply font-semibold text-text;
  font-size: var(--font-size-large);
}

.settlement-section {
  @apply mb-[var(--space-3)] border border-border-light rounded-s overflow-hidden;

  &:last-child {
    @apply mb-0;
  }
}

.settlement-section-header {
  @apply flex justify-between items-center w-full p-[var(--space-3)] bg-bg border-none cursor-pointer text-left;

  &:hover {
    @apply bg-border-light;
  }
}

.settlement-section-title {
  @apply text-sm font-medium text-text;
}

.settlement-section-toggle {
  @apply text-base text-text-muted;
}

.settlement-section-content {
  @apply p-[var(--space-3)] bg-bg-elevated;
}

.settlement-description {
  @apply text-text-muted mb-[var(--space-3)];
  font-size: var(--font-size-caption);
}

.settlement-actions-list {
  @apply flex flex-col gap-[var(--space-2)];
}

.settlement-action {
  @apply flex justify-between items-center p-[var(--space-2)] bg-bg rounded-s;
}

.settlement-action-flow {
  @apply flex items-center gap-[var(--space-2)] text-sm;
}

.settlement-action-from {
  @apply text-text font-medium;
}

.settlement-action-arrow {
  @apply text-text-muted;
}

.settlement-action-to {
  @apply text-text font-medium;
}

.settlement-action-amount {
  @apply text-sm font-semibold text-accent;
}

.settlement-balances-list {
  @apply flex flex-col gap-[var(--space-3)];
}

.settlement-balance-row {
  @apply pb-[var(--space-3)] border-b border-border-light;

  &:last-child {
    @apply pb-0 border-b-0;
  }
}

.settlement-balance-name {
  @apply block text-sm font-medium text-text mb-[var(--space-2)];
}

.settlement-balance-details {
  @apply flex gap-[var(--space-3)] flex-wrap;
}

.settlement-balance-item {
  @apply flex flex-col;
  gap: 2px;
}

.settlement-balance-label {
  @apply text-text-muted;
  font-size: var(--font-size-caption);
}

.settlement-balance-value {
  @apply text-sm text-text;
}

.settlement-balance-item.balance .settlement-balance-value {
  @apply font-semibold;
}

.settlement-balance-item.balance.positive .settlement-balance-value {
  color: var(--color-success);
}

.settlement-balance-item.balance.negative .settlement-balance-value {
  color: var(--color-danger);
}

.settlement-settled {
  @apply flex items-center justify-center gap-[var(--space-2)] p-[var(--space-3)] rounded-s text-sm;
  background: rgba(74, 124, 74, 0.1);
  color: var(--color-success);
}

.settlement-settled-icon {
  @apply font-semibold;
}

/* Compact Settlement */
.settlement-compact {
  @apply bg-bg-elevated border border-border rounded-m p-[var(--space-3)] mt-[var(--space-3)];
}

.settlement-compact-header {
  @apply flex justify-between items-center mb-[var(--space-2)];
}

.settlement-compact-title {
  @apply text-sm font-medium text-text;
}

.settlement-compact-total {
  @apply text-sm font-semibold text-text;
}

.settlement-compact-actions {
  @apply flex flex-col gap-[var(--space-1)];
}

.settlement-compact-action {
  @apply flex items-center gap-[var(--space-1)] text-text;
  font-size: var(--font-size-caption);
}

.settlement-compact-arrow {
  @apply text-text-muted;
}

.settlement-compact-amount {
  @apply ml-auto font-medium;
}

.settlement-compact-more {
  @apply text-text-muted text-center;
  font-size: var(--font-size-caption);
}

.settlement-compact-settled {
  @apply text-sm text-center;
  color: var(--color-success);
}

/* ========================================
   Expense Modal Styles
   ======================================== */

.expense-modal {
  @apply flex flex-col;
  max-width: 500px;
  max-height: 85vh;
}

.expense-modal-tabs {
  @apply flex border-b border-border px-[var(--space-4)];
  margin: 0 calc(-1 * var(--space-4));
}

.expense-modal-tab {
  @apply flex-1 p-[var(--space-3)] bg-none border-none text-text-muted text-sm font-medium cursor-pointer;
  border-bottom: 2px solid transparent;
  transition: color 0.15s ease, border-color 0.15s ease;

  &:hover {
    @apply text-text;
  }

  &.active {
    @apply text-text;
    border-bottom-color: var(--color-accent);
  }
}

.expense-modal-loading {
  @apply p-[var(--space-6)] text-center text-text-muted text-sm;
}

.expense-modal-body {
  @apply flex-1 overflow-y-auto py-[var(--space-4)] px-0;
}

.expense-tab-content {
  @apply flex flex-col gap-[var(--space-4)];
}

.expense-section-header {
  @apply flex justify-between items-center;
}

.expense-section-title {
  @apply text-sm font-medium text-text m-0;
}

.expense-empty-text {
  @apply text-text-muted text-sm text-center py-[var(--space-4)] px-0;
}

/* Participant List */
.expense-participant-list {
  @apply list-none p-0 m-0;
}

.expense-participant-item {
  @apply flex items-center justify-between py-[var(--space-2)] px-[var(--space-3)] border border-border-light rounded-s mb-[var(--space-2)];
}

.expense-participant-name {
  @apply text-sm text-text;
}

.expense-add-participant {
  @apply flex gap-[var(--space-2)] mt-[var(--space-2)];

  & .input {
    @apply flex-1;
  }
}

/* Expense Form */
.expense-form {
  @apply flex flex-col gap-[var(--space-3)];
}

.expense-form-row {
  @apply flex flex-col gap-[var(--space-1)];
}

.expense-form-label {
  @apply font-medium text-text;
  font-size: var(--font-size-caption);
}

.expense-form-actions {
  @apply flex justify-end gap-[var(--space-2)] mt-[var(--space-2)];
}

/* Expense List */
.expense-list {
  @apply list-none p-0 m-0;
}

.expense-list-item {
  @apply flex items-center gap-[var(--space-2)] p-[var(--space-3)] border border-border-light rounded-s mb-[var(--space-2)];
}

.expense-list-item-main {
  @apply flex-1 flex justify-between items-center;
}

.expense-list-item-info {
  @apply flex flex-col;
  gap: 2px;
}

.expense-list-item-payer {
  @apply text-sm font-medium text-text;
}

.expense-list-item-desc {
  @apply text-text-muted;
  font-size: var(--font-size-caption);
}

.expense-list-item-amount {
  @apply text-sm font-semibold text-text;
}

.expense-delete-btn {
  @apply text-text-muted text-sm;
}

/* Settlement Styles */
.expense-settlement-total {
  @apply flex justify-between items-center p-[var(--space-3)] bg-bg rounded-s;
}

.expense-settlement-total-label {
  @apply text-sm text-text;
}

.expense-settlement-total-amount {
  @apply font-semibold text-text;
  font-size: var(--font-size-large);
}

.expense-settlement-actions {
  @apply p-[var(--space-3)] bg-bg rounded-s;
}

.expense-settlement-subtitle {
  @apply text-sm font-medium text-text m-0 mb-[var(--space-1)];
}

.expense-settlement-description {
  @apply text-text-muted mb-[var(--space-3)];
  font-size: var(--font-size-caption);
}

.expense-settlement-list {
  @apply list-none p-0 m-0;
}

.expense-settlement-item {
  @apply flex justify-between items-center p-[var(--space-2)] bg-bg-elevated rounded-s mb-[var(--space-2)];

  &:last-child {
    @apply mb-0;
  }
}

.expense-settlement-flow {
  @apply flex items-center gap-[var(--space-2)] text-sm;
}

.expense-settlement-from,
.expense-settlement-to {
  @apply font-medium text-text;
}

.expense-settlement-arrow {
  @apply text-text-muted;
}

.expense-settlement-amount {
  @apply text-sm font-semibold text-accent;
}

.expense-settlement-settled {
  @apply flex items-center justify-center gap-[var(--space-2)] p-[var(--space-4)] rounded-s text-sm;
  background: rgba(74, 124, 74, 0.1);
  color: var(--color-success);
}

.expense-settlement-settled-icon {
  @apply font-semibold;
}

.expense-settlement-balances {
  @apply mt-[var(--space-4)];
}

.expense-balance-list {
  @apply list-none p-0 mt-[var(--space-3)] mb-0 mx-0;
}

.expense-balance-item {
  @apply p-[var(--space-3)] border border-border-light rounded-s mb-[var(--space-2)];

  &:last-child {
    @apply mb-0;
  }
}

.expense-balance-name {
  @apply block text-sm font-medium text-text mb-[var(--space-2)];
}

.expense-balance-details {
  @apply flex gap-[var(--space-4)] flex-wrap;
}

.expense-balance-detail {
  @apply flex flex-col;
  gap: 2px;
}

.expense-balance-label {
  @apply text-text-muted;
  font-size: var(--font-size-caption);
}

.expense-balance-value {
  @apply text-sm text-text;
}

.expense-balance-detail.balance .expense-balance-value {
  @apply font-semibold;
}

.expense-balance-detail.balance.positive .expense-balance-value {
  color: var(--color-success);
}

.expense-balance-detail.balance.negative .expense-balance-value {
  color: var(--color-danger);
}
