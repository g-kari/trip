/* ========================================
   Voice Input Button
   ======================================== */

.voice-input-btn {
  @apply relative inline-flex items-center justify-center
         size-9 p-0
         bg-bg border border-border rounded-m
         text-text-muted cursor-pointer shrink-0;
  transition: all var(--transition-fast);

  &:hover:not(:disabled) {
    @apply border-accent text-accent;
  }

  &:disabled {
    @apply opacity-50 cursor-not-allowed;
  }
}

/* Listening state */
.voice-input-btn--listening {
  border-color: var(--color-danger);
  color: var(--color-danger);
  background: rgba(181, 80, 80, 0.08);

  &:hover:not(:disabled) {
    border-color: var(--color-danger-hover);
    color: var(--color-danger-hover);
  }
}

/* Pulse animation for recording indicator */
.voice-input-pulse {
  @apply absolute rounded-m pointer-events-none;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
}

.voice-input-btn--listening .voice-input-pulse {
  animation: voice-pulse 1.5s ease-out infinite;
}

@keyframes voice-pulse {
  0% {
    outline: 2px solid rgba(181, 80, 80, 0.4);
    outline-offset: 0;
  }
  70% {
    outline: 2px solid rgba(181, 80, 80, 0);
    outline-offset: 10px;
  }
  100% {
    outline: 2px solid rgba(181, 80, 80, 0);
    outline-offset: 10px;
  }
}

/* Title input with voice button layout */
.input-with-voice {
  @apply flex items-center gap-[var(--space-2)];

  & .input {
    @apply flex-1;
  }
}

/* Dark mode adjustments */
[data-color-mode="dark"] .voice-input-btn--listening {
  background: rgba(181, 80, 80, 0.15);
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="system"] .voice-input-btn--listening,
  :root:not([data-color-mode]) .voice-input-btn--listening {
    background: rgba(181, 80, 80, 0.15);
  }
}

/* Photo theme adjustments */
[data-theme="photo"] .voice-input-btn--listening {
  border-color: var(--color-accent);
  color: var(--color-accent);
  background: rgba(233, 69, 96, 0.08);
}

[data-theme="photo"] .voice-input-btn--listening .voice-input-pulse {
  animation-name: voice-pulse-photo;
}

@keyframes voice-pulse-photo {
  0% {
    outline: 2px solid rgba(233, 69, 96, 0.4);
    outline-offset: 0;
  }
  70% {
    outline: 2px solid rgba(233, 69, 96, 0);
    outline-offset: 10px;
  }
  100% {
    outline: 2px solid rgba(233, 69, 96, 0);
    outline-offset: 10px;
  }
}
