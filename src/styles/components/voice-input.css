/* ========================================
   Voice Input Button
   ======================================== */

.voice-input-btn {
  @apply relative inline-flex items-center justify-center
         size-9 p-0
         bg-bg border border-border rounded-m
         text-text-muted cursor-pointer shrink-0;
  transition: all var(--transition-fast);

  &:hover:not(:disabled) {
    @apply border-accent text-accent;
  }

  &:disabled {
    @apply opacity-50 cursor-not-allowed;
  }
}

/* Listening state */
.voice-input-btn--listening {
  border-color: #e53935;
  color: #e53935;
  background: rgba(229, 57, 53, 0.08);

  &:hover:not(:disabled) {
    border-color: #c62828;
    color: #c62828;
  }
}

/* Pulse animation for recording indicator */
.voice-input-pulse {
  @apply absolute rounded-m pointer-events-none;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
}

.voice-input-btn--listening .voice-input-pulse {
  animation: voice-pulse 1.5s ease-out infinite;
}

@keyframes voice-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(229, 57, 53, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(229, 57, 53, 0);
  }
}

/* Title input with voice button layout */
.input-with-voice {
  @apply flex items-center gap-[var(--space-2)];

  & .input {
    @apply flex-1;
  }
}

/* Recording status indicator (optional, for more feedback) */
.voice-input-status {
  @apply text-xs mt-[var(--space-1)];
  color: #e53935;
  animation: voice-status-blink 1s ease-in-out infinite;
}

@keyframes voice-status-blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Dark mode adjustments */
[data-color-mode="dark"] .voice-input-btn--listening {
  background: rgba(229, 57, 53, 0.15);
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="system"] .voice-input-btn--listening,
  :root:not([data-color-mode]) .voice-input-btn--listening {
    background: rgba(229, 57, 53, 0.15);
  }
}

/* Photo theme adjustments */
[data-theme="photo"] .voice-input-btn--listening {
  border-color: var(--color-accent);
  color: var(--color-accent);
  background: rgba(233, 69, 96, 0.08);
}

[data-theme="photo"] .voice-input-btn--listening .voice-input-pulse {
  animation-name: voice-pulse-photo;
}

@keyframes voice-pulse-photo {
  0% {
    box-shadow: 0 0 0 0 rgba(233, 69, 96, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(233, 69, 96, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(233, 69, 96, 0);
  }
}
