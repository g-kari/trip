/* ========================================
   Voice Input Button
   ======================================== */

.voice-input-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  padding: 0;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-m);
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.voice-input-btn:hover:not(:disabled) {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.voice-input-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Listening state */
.voice-input-btn--listening {
  border-color: #e53935;
  color: #e53935;
  background: rgba(229, 57, 53, 0.08);
}

.voice-input-btn--listening:hover:not(:disabled) {
  border-color: #c62828;
  color: #c62828;
}

/* Pulse animation for recording indicator */
.voice-input-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  border-radius: var(--radius-m);
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.voice-input-btn--listening .voice-input-pulse {
  animation: voice-pulse 1.5s ease-out infinite;
}

@keyframes voice-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(229, 57, 53, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(229, 57, 53, 0);
  }
}

/* Title input with voice button layout */
.input-with-voice {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.input-with-voice .input {
  flex: 1;
}

/* Recording status indicator (optional, for more feedback) */
.voice-input-status {
  font-size: 0.75rem;
  color: #e53935;
  margin-top: var(--space-1);
  animation: voice-status-blink 1s ease-in-out infinite;
}

@keyframes voice-status-blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Dark mode adjustments */
[data-color-mode="dark"] .voice-input-btn--listening {
  background: rgba(229, 57, 53, 0.15);
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="system"] .voice-input-btn--listening,
  :root:not([data-color-mode]) .voice-input-btn--listening {
    background: rgba(229, 57, 53, 0.15);
  }
}

/* Photo theme adjustments */
[data-theme="photo"] .voice-input-btn--listening {
  border-color: var(--color-accent);
  color: var(--color-accent);
  background: rgba(233, 69, 96, 0.08);
}

[data-theme="photo"] .voice-input-btn--listening .voice-input-pulse {
  animation-name: voice-pulse-photo;
}

@keyframes voice-pulse-photo {
  0% {
    box-shadow: 0 0 0 0 rgba(233, 69, 96, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(233, 69, 96, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(233, 69, 96, 0);
  }
}
