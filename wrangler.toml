name = "trip"
main = "src/worker.ts"
compatibility_date = "2026-02-19"
compatibility_flags = ["nodejs_compat"]

# Custom domain
routes = [
  { pattern = "shio.0g0.xyz", custom_domain = true }
]

# Serve the Vite build output as static assets.
[assets]
directory = "./dist"
binding = "ASSETS"
# Let the Worker handle all routing, don't auto-redirect for missing files
not_found_handling = "none"
html_handling = "none"

# D1 database (create later with: wrangler d1 create trip-itinerary)
[[d1_databases]]
binding = "DB"
database_name = "trip-itinerary"
database_id = "03cacfd7-1a0f-408b-b892-07a8baa34e8c"

# R2 bucket for cover images
[[r2_buckets]]
bucket_name = "trip-covers"
binding = "COVERS"

# Workers AI
[ai]
binding = "AI"

# Observability - logs (tracing will be enabled automatically in future)
[observability]
enabled = true
head_sampling_rate = 1  # 100% of requests (adjust for production if needed)

# Environment variables (secrets should be set via `wrangler secret put`)
[vars]
# GOOGLE_CLIENT_ID = "set via wrangler secret put"
# GOOGLE_CLIENT_SECRET = "set via wrangler secret put"
# SESSION_SECRET = "set via wrangler secret put"
